(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-authorization-authorization"],{"1a63":function(t,e,i){"use strict";i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return s}));var s={uToast:i("f110").default,uButton:i("a011").default},n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"content",style:t.isMobile?"width:100%":"width:1280rpx"},[i("u-toast",{ref:"uToast"}),i("v-uni-view",{staticClass:"options-bg"},[i("v-uni-view",{staticClass:"text-area"},[i("v-uni-text",[t._v("主帐号:")]),i("v-uni-input",{staticClass:"input",attrs:{maxlength:"-1",placeholder:"输入开通会员的地址"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.mainAddressInput.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.mainAddressConfirmClick.apply(void 0,arguments)}},model:{value:t.mainAddress,callback:function(e){t.mainAddress=e},expression:"mainAddress"}})],1),i("u-button",{staticClass:"query-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.mainAddressConfirmClick.apply(void 0,arguments)}}},[t._v("确认")])],1),i("v-uni-view",{staticStyle:{margin:"30rpx","word-wrap":"break-word"}},[t._v("确认主帐号："+t._s(t.mainAddressConfirm))]),i("v-uni-view",{staticClass:"options-bg"},[i("v-uni-view",{staticClass:"text-area"},[i("v-uni-text",[t._v("子帐号:")]),i("v-uni-input",{staticClass:"input",attrs:{maxlength:"-1",placeholder:"输入所有需要转鱼的地址"},on:{input:function(e){arguments[0]=e=t.$handleEvent(e),t.subAddressInput.apply(void 0,arguments)},confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.subAddressConfirmClick.apply(void 0,arguments)}},model:{value:t.subAddress,callback:function(e){t.subAddress=e},expression:"subAddress"}})],1),i("u-button",{staticClass:"query-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.subAddressConfirmClick.apply(void 0,arguments)}}},[t._v("确认")])],1),i("v-uni-view",{staticClass:"sort-bg"},[i("v-uni-view",{staticClass:"flex-row"},[i("v-uni-view",{staticClass:"import-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.allCheckBtnClick.apply(void 0,arguments)}}},[t._v("全部检测")]),i("v-uni-view",{staticClass:"import-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.codeBtnClick.apply(void 0,arguments)}}},[t._v("查询源码")])],1)],1),i("v-uni-view",{staticClass:"import-address-bg"},t._l(t.subAddressList,(function(e,s){return i("v-uni-view",{key:s,staticClass:"item"},[i("v-uni-view",{},[t._v(t._s(t.formatAddress(e)))]),t.approvedDict[e]?i("v-uni-view",{staticClass:"import-btn selected-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.authorizBtnClick(s)}}},[t._v("已授权")]):i("v-uni-view",{staticClass:"import-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.authorizBtnClick(s)}}},[t._v("授权")]),i("v-uni-view",{staticClass:"import-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.delbtnClick(s)}}},[t._v("删除")])],1)})),1),i("v-uni-view",{staticClass:"bottom-info"},[i("v-uni-view",{staticClass:"item"},[t._v("1、先在主帐号输入框，输入开通会员的钱包地址，点确认。")]),i("v-uni-text",{staticClass:"item"},[t._v("2、再到子帐号输入框，输入需要转鱼的地址，支持多个英文逗号分割如 地址1,地址2 。后点确认。")]),i("v-uni-view",{},[t._v("3、给每一个子帐号授权，先用小狐狸钱包切换到对应子帐号，然后点击对应子帐号授权按钮。")]),i("v-uni-view",{},[t._v("4、每个子帐号授完权以后，小狐狸钱包切回到主帐号，任务完成。回到我的鲨鱼界面方便快速转鱼，起飞。")]),i("v-uni-view",{},[t._v("5、此功能免费开放，请自行确保帐户安全，如有财产丢失，本站概不负责。")])],1)],1)},r=[]},"1d90":function(t,e,i){"use strict";var s=i("f4db"),n=i.n(s);n.a},"3ffe":function(t,e,i){var s=i("24fb");e=s(!1),e.push([t.i,"uni-page-body[data-v-2940f3be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;background-color:#232734;width:100vw;color:#fff}.content[data-v-2940f3be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column;padding:0 %?20?%}.options-bg[data-v-2940f3be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;margin:%?30?%;width:100%}.options-bg .query-btn[data-v-2940f3be]{width:%?120?%;height:%?68?%;color:#fff;text-align:center;line-height:%?68?%;background-color:#4c72a5;-webkit-border-radius:28px;border-radius:28px;border:none}.text-area[data-v-2940f3be]{display:-webkit-box;display:-webkit-flex;display:flex;width:60%;height:%?68?%;background-color:#172233;-webkit-border-radius:%?34?%;border-radius:%?34?%;padding-left:%?20?%;padding-right:%?20?%;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;margin-right:%?10?%;-webkit-box-sizing:border-box;box-sizing:border-box;color:#dedfe0}.text-area .input[data-v-2940f3be]{-webkit-box-flex:1;-webkit-flex:1;flex:1}.sort-bg[data-v-2940f3be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row;width:100%;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;-webkit-flex-wrap:wrap;flex-wrap:wrap}.sort-bg .import-btn[data-v-2940f3be]{background-color:#4c72a5;margin:%?6?%;padding:%?10?%;-webkit-border-radius:%?10?%;border-radius:%?10?%}.sort-bg .item[data-v-2940f3be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;font-size:%?34?%;margin:%?4?% %?20?%}.sort-bg .item .sort-icon[data-v-2940f3be]{width:%?32?%;height:%?32?%}.import-address-bg[data-v-2940f3be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-flex-wrap:wrap;flex-wrap:wrap;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center}.import-address-bg .item[data-v-2940f3be]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;justify-content:center;border:%?1?% solid #ffae4d;-webkit-border-radius:%?6?%;border-radius:%?6?%;margin:%?10?%;padding:%?10?%}.import-address-bg .item .import-btn[data-v-2940f3be]{background-color:#4c72a5;margin:%?6?%;padding:%?10?%;-webkit-border-radius:%?10?%;border-radius:%?10?%}.import-address-bg .item .selected-btn[data-v-2940f3be]{background-color:#ffae4d}.bottom-info .item[data-v-2940f3be]{word-wrap:break-word}body.?%PAGE?%[data-v-2940f3be]{background-color:#232734}",""]),t.exports=e},9682:function(t,e,i){"use strict";i.r(e);var s=i("dc83"),n=i.n(s);for(var r in s)"default"!==r&&function(t){i.d(e,t,(function(){return s[t]}))}(r);e["default"]=n.a},"9b23":function(t,e,i){"use strict";var s=i("4ea4");i("99af"),i("c975"),i("a434"),i("ac1f"),i("1276"),i("96cf");var n=s(i("1da1")),r=s(i("1c71"));t.exports={data:function(){return{mainAddress:"",mainAddressConfirm:"",subAddress:"",subAddressList:[],approvedDict:{},isMobile:!1}},computed:{formatAddress:function(){return function(t){var e=t.substr(0,6),i=t.substr(t.length-4,4);return e+"..."+i}}},onLoad:function(t){window&&window._czc&&window._czc.push(["_trackEvent","授权","onLoad"]),this.isMobile=getApp().isMobile;var e=uni.getStorageSync("authorizationMainAddress");e&&(this.mainAddressConfirm=e);var i=uni.getStorageSync("authorizationSubAddressList");i&&i.length>0&&(this.subAddressList=Object.assign(i))},methods:{mainAddressInput:function(t){this.mainAddress=t.detail.value.toLowerCase()},subAddressInput:function(t){this.subAddress=t.detail.value.toLowerCase()},mainAddressConfirmClick:function(){this.mainAddressConfirm=this.mainAddress,uni.setStorageSync("authorizationMainAddress",this.mainAddressConfirm)},subAddressConfirmClick:function(){if(-1!=this.subAddress.indexOf(",")){var t=[];t=r.default.isJsonString(this.subAddress)?JSON.parse(this.subAddress):this.subAddress.split(","),this.subAddressList=this.subAddressList.concat(t);for(var e=[],i=0,s=this.subAddressList.length;i<s;i++)-1==e.indexOf(this.subAddressList[i])&&this.subAddressList[i]!=this.mainAddressConfirm&&e.push(this.subAddressList[i]);this.subAddressList=e,uni.setStorageSync("authorizationSubAddressList",this.subAddressList)}else-1==this.subAddressList.indexOf(this.subAddress.toLowerCase())?(this.subAddressList.push(this.subAddress),uni.setStorageSync("authorizationSubAddressList",this.subAddressList)):this.$refs.uToast.show({type:"error",duration:"1000",message:"地址已导入"})},authorizBtnClick:function(t){var e=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var s,n,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=e.subAddressList[t],i.next=3,e.$pWeb3Contract.methods.isApprovedForAll(s,e.mainAddressConfirm).call();case 3:n=i.sent,uni.showLoading({mask:!0,title:n?"取消授权中":"授权中"}),r=e,e.$pWeb3Contract.methods.setApprovalForAll(e.mainAddressConfirm,!n).send({from:s}).then((function(t){uni.hideLoading(),e.$refs.uToast.show({type:"success",duration:"1500",message:"操作完成"}),setTimeout((function(){r.checkAddress(s)}),1200)})).catch((function(t){uni.hideLoading(),t&&-32602==t.code?e.$refs.uToast.show({type:"error",duration:"2000",message:"授权失败,检查是否已切换到授权子地址"}):e.$refs.uToast.show({type:"error",duration:"2000",message:"授权失败"})}));case 7:case"end":return i.stop()}}),i)})))()},delbtnClick:function(t){var e=this;uni.showModal({title:"提示",content:"确认删除",success:function(i){i.confirm&&e.delConfirm(t)}})},delConfirm:function(t){this.subAddressList[t];this.subAddressList.splice(t,1),uni.setStorageSync("authorizationSubAddressList",this.subAddressList)},checkAddress:function(t){var e=this;return(0,n.default)(regeneratorRuntime.mark((function i(){var s;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return uni.showLoading({mask:!0,title:"检测中..."}),i.next=3,e.$pWeb3Contract.methods.isApprovedForAll(t,e.mainAddressConfirm).call();case 3:s=i.sent,e.$set(e.approvedDict,t,s),uni.hideLoading(),e.$refs.uToast.show({type:"success",duration:"1500",message:"检测完成，已更新页面"});case 7:case"end":return i.stop()}}),i)})))()},codeBtnClick:function(){console.log("查看源码点击右侧 js文件"),this.$refs.uToast.show({type:"success",duration:"2500",message:"打开控制台，查看源码"})},allCheckBtnClick:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var i,s,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.mainAddressConfirm){e.next=3;break}return t.$refs.uToast.show({type:"error",duration:"1500",message:"输入主帐号地址"}),e.abrupt("return");case 3:uni.showLoading({mask:!0,title:"检测中..."}),i=0;case 5:if(!(i<t.subAddressList.length)){e.next=14;break}return s=t.subAddressList[i],e.next=9,t.$pWeb3Contract.methods.isApprovedForAll(s,t.mainAddressConfirm).call();case 9:n=e.sent,t.$set(t.approvedDict,s,n);case 11:i++,e.next=5;break;case 14:uni.hideLoading(),t.$refs.uToast.show({type:"success",duration:"1500",message:"检测完成，已更新页面"});case 16:case"end":return e.stop()}}),e)})))()}}}},"9ca1":function(t,e,i){"use strict";i.r(e);var s=i("1a63"),n=i("9682");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);i("1d90");var a,o=i("f0c5"),d=Object(o["a"])(n["default"],s["b"],s["c"],!1,null,"2940f3be",null,!1,s["a"],a);e["default"]=d.exports},dc83:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s="";s=i("9b23");var n=s;e.default=n},f4db:function(t,e,i){var s=i("3ffe");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var n=i("4f06").default;n("3738bc58",s,!0,{sourceMap:!1,shadowMode:!1})}}]);